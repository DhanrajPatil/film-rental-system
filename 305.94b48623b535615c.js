"use strict";(self.webpackChunkfilm_rental_system=self.webpackChunkfilm_rental_system||[]).push([[305],{3305:(zt,I,l)=>{l.r(I),l.d(I,{FilmsModule:()=>kt});var C=l(6895),g=l(3060),O=l(262),$=l(9646),N=l(7974),T=l(6308),u=l(7155),t=l(4650),_=l(2340),R=l(7579),P=l(6063);class k extends R.x{constructor(n=1/0,e=1/0,a=P.l){super(),this._bufferSize=n,this._windowTime=e,this._timestampProvider=a,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=e===1/0,this._bufferSize=Math.max(1,n),this._windowTime=Math.max(1,e)}next(n){const{isStopped:e,_buffer:a,_infiniteTimeWindow:o,_timestampProvider:r,_windowTime:m}=this;e||(a.push(n),!o&&a.push(r.now()+m)),this._trimBuffer(),super.next(n)}_subscribe(n){this._throwIfClosed(),this._trimBuffer();const e=this._innerSubscribe(n),{_infiniteTimeWindow:a,_buffer:o}=this,r=o.slice();for(let m=0;m<r.length&&!n.closed;m+=a?1:2)n.next(r[m]);return this._checkFinalizedStatuses(n),e}_trimBuffer(){const{_bufferSize:n,_timestampProvider:e,_buffer:a,_infiniteTimeWindow:o}=this,r=(o?1:2)*n;if(n<1/0&&r<a.length&&a.splice(0,a.length-r),!o){const m=e.now();let p=0;for(let d=1;d<a.length&&a[d]<=m;d+=2)p=d;p&&a.splice(0,p+1)}}}var M=l(3099),U=l(529);let S=(()=>{class i{constructor(e){this.http=e,this.filmUrl=_.N.filmUrl,this.languageUrl=_.N.languageUrl,this.actorUrl=_.N.actorUrl,this.categoryUrl=_.N.categoryUrl,this.cache=new Map}getFilmsByPageAndSize(e,a,o){return this.http.get(`${this.filmUrl}?page=${e}&size=${a}&sort=${o}`)}addFilm(e){return this.cache.delete(e.id),this.http.post(this.filmUrl,e)}patchFilm(e,a){return this.http.patch(this.filmUrl+"/"+e,a)}updateFilm(e,a){return this.http.put(this.filmUrl+"/"+e,a)}getAllLanguages(){return this.http.get(`${this.languageUrl}`)}getAllCategories(){return this.http.get(`${this.categoryUrl}`)}getFilmById(e){if(!this.cache.has(e)){const a=this.http.get(`${this.filmUrl}/${e}`).pipe(function z(i,n,e){let a,o=!1;return i&&"object"==typeof i?({bufferSize:a=1/0,windowTime:n=1/0,refCount:o=!1,scheduler:e}=i):a=i??1/0,(0,M.B)({connector:()=>new k(a,n,e),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:o})}(1));this.cache.set(e,a)}return this.cache.get(e)}getActorsByName(e){return this.http.get(`${this.actorUrl}/search/${e}`)}}return i.\u0275fac=function(e){return new(e||i)(t.LFG(U.eN))},i.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();var y=l(4859),D=l(7392);function H(i,n){1&i&&(t.TgZ(0,"th",29),t._uU(1,"Id"),t.qZA())}function B(i,n){if(1&i&&(t.TgZ(0,"td",30),t._uU(1),t.qZA()),2&i){const e=n.$implicit;t.xp6(1),t.Oqu(null==e?null:e.id)}}function E(i,n){1&i&&(t.TgZ(0,"th",31),t._uU(1,"Title"),t.qZA())}function V(i,n){if(1&i&&(t.TgZ(0,"td",30),t._uU(1),t.qZA()),2&i){const e=n.$implicit;t.xp6(1),t.Oqu(null==e?null:e.title)}}function G(i,n){1&i&&(t.TgZ(0,"th",32),t._uU(1,"Rental Rate"),t.qZA())}function W(i,n){if(1&i&&(t.TgZ(0,"td",30),t._uU(1),t.qZA()),2&i){const e=n.$implicit;t.xp6(1),t.Oqu(null==e?null:e.rentalRate)}}function j(i,n){1&i&&(t.TgZ(0,"th",33),t._uU(1,"Length"),t.qZA())}function K(i,n){if(1&i&&(t.TgZ(0,"td",30),t._uU(1),t.qZA()),2&i){const e=n.$implicit;t.xp6(1),t.Oqu(null==e?null:e.length)}}function X(i,n){1&i&&(t.TgZ(0,"th",34),t._uU(1,"Rental Duration"),t.qZA())}function tt(i,n){if(1&i&&(t.TgZ(0,"td",30),t._uU(1),t.qZA()),2&i){const e=n.$implicit;t.xp6(1),t.Oqu(e.rentalDuration)}}function et(i,n){1&i&&(t.TgZ(0,"th",35),t._uU(1,"Release Year"),t.qZA())}function it(i,n){if(1&i&&(t.TgZ(0,"td",30),t._uU(1),t.qZA()),2&i){const e=n.$implicit;t.xp6(1),t.Oqu(null==e?null:e.releaseYear)}}function at(i,n){1&i&&(t.TgZ(0,"th",36),t._uU(1,"Rating"),t.qZA())}function nt(i,n){if(1&i&&(t.TgZ(0,"td",30),t._uU(1),t.qZA()),2&i){const e=n.$implicit;t.xp6(1),t.Oqu(null==e?null:e.rating)}}function ot(i,n){1&i&&(t.TgZ(0,"th",37),t._uU(1,"Replacement Cost"),t.qZA())}function lt(i,n){if(1&i&&(t.TgZ(0,"td",30),t._uU(1),t.qZA()),2&i){const e=n.$implicit;t.xp6(1),t.Oqu(null==e?null:e.replacementCost)}}function rt(i,n){1&i&&(t.TgZ(0,"th",38),t._uU(1,"Language"),t.qZA())}function st(i,n){if(1&i&&(t.TgZ(0,"td",30),t._uU(1),t.qZA()),2&i){const e=n.$implicit;t.xp6(1),t.Oqu(null==e?null:e.language)}}function mt(i,n){1&i&&(t.TgZ(0,"th",39),t._uU(1,"\xa0"),t.qZA())}const ct=function(i){return["edit",i]};function ut(i,n){1&i&&(t.TgZ(0,"td",40)(1,"mat-icon"),t._uU(2,"edit"),t.qZA()()),2&i&&t.Q6J("routerLink",t.VKq(1,ct,n.$implicit.id))}function pt(i,n){1&i&&t._UZ(0,"tr",41)}function dt(i,n){1&i&&t._UZ(0,"tr",42)}let gt=(()=>{class i{constructor(e,a,o){this.filmService=e,this.router=a,this.route=o,this.displayedColumns=["id","title","releaseYear","language","rentalDuration","rentalRate","length","replacementCost","rating","edit"],this.currentPageDetails={pageIndex:0,pageSize:15,length:1e3},this.pageSizeOptions=[5,10,15,45,100,300,1e3],this.currentSort={active:"id",direction:"asc"},this.filmDataSource=new u.by}ngOnInit(){this.route.queryParams.subscribe(e=>{this.currentPageDetails={pageIndex:e.page?+e.page:this.currentPageDetails.pageIndex,pageSize:e.size?+e.size:this.currentPageDetails.pageSize,length:this.currentPageDetails.length};const a=e.sort?e.sort.split(","):null;this.currentSort={active:a&&a.length?a[0]:this.currentSort.active,direction:a&&a.length>1?a[1]:this.currentSort.direction},this.paginateAndSortFilms(this.currentPageDetails,this.currentSort)})}ngAfterViewInit(){this.filmDataSource.paginator=this.paginator,this.filmDataSource.sort=this.sort,setTimeout(()=>{this.paginator.pageIndex=this.currentPageDetails.pageIndex,this.paginator.pageSize=this.currentPageDetails.pageSize})}handlePageEvent(e={pageIndex:0,pageSize:15,length:1e3}){this.currentPageDetails=e,this.navigateToPaginatedList()}paginateAndSortFilms(e,a){this.filmService.getFilmsByPageAndSize(e.pageIndex,e.pageSize,`${a.active},${a.direction}`).pipe((0,O.K)(o=>(console.error("Error loading customers",o),(0,$.of)({items:[],totalItems:0,page:0,size:0,totalPages:0})))).subscribe(o=>{this.filmDataSource=new u.by(o.items),this.currentPageDetails={pageIndex:o.page,pageSize:o.size,length:o.totalItems}})}editFilm(e){this.router.navigate(["films/edit",e.id],{queryParamsHandling:"preserve"})}navigateToPaginatedList(){this.router.navigate([],{queryParams:{page:this.currentPageDetails.pageIndex,size:this.currentPageDetails.pageSize,sort:`${this.currentSort.active},${this.currentSort.direction}`}})}sortFilms(e){this.currentSort=e,this.currentPageDetails={...this.currentPageDetails,pageIndex:0},this.navigateToPaginatedList()}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(S),t.Y36(g.F0),t.Y36(g.gz))},i.\u0275cmp=t.Xpm({type:i,selectors:[["frs-film-list"]],viewQuery:function(e,a){if(1&e&&(t.Gf(T.YE,5),t.Gf(N.NW,5)),2&e){let o;t.iGM(o=t.CRH())&&(a.sort=o.first),t.iGM(o=t.CRH())&&(a.paginator=o.first)}},decls:38,vars:8,consts:[[1,"container"],["mat-raised-button","","color","primary","routerLink","./add",1,"frs-mb-10","frs-mr-15"],[1,"mat-elevation-z8"],["mat-table","","matSort","",3,"dataSource","matSortChange"],["matColumnDef","id"],["mat-header-cell","","mat-sort-header","id",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","title"],["mat-header-cell","","mat-sort-header","title",4,"matHeaderCellDef"],["matColumnDef","rentalRate"],["mat-header-cell","","mat-sort-header","rentalRate",4,"matHeaderCellDef"],["matColumnDef","length"],["mat-header-cell","","mat-sort-header","length",4,"matHeaderCellDef"],["matColumnDef","rentalDuration"],["mat-header-cell","","mat-sort-header","rentalDuration",4,"matHeaderCellDef"],["matColumnDef","releaseYear"],["mat-header-cell","","mat-sort-header","releaseYear",4,"matHeaderCellDef"],["matColumnDef","rating"],["mat-header-cell","","mat-sort-header","rating",4,"matHeaderCellDef"],["matColumnDef","replacementCost"],["mat-header-cell","","mat-sort-header","replacementCost",4,"matHeaderCellDef"],["matColumnDef","language"],["mat-header-cell","","mat-sort-header","language",4,"matHeaderCellDef"],["matColumnDef","edit","stickyEnd",""],["mat-header-cell","","aria-label","row actions",4,"matHeaderCellDef"],["mat-cell","",3,"routerLink",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","","aria-label","Select page",1,"demo-paginator","mat-paginator-sticky",3,"pageSizeOptions","pageSize","pageIndex","length","page"],["mat-header-cell","","mat-sort-header","id"],["mat-cell",""],["mat-header-cell","","mat-sort-header","title"],["mat-header-cell","","mat-sort-header","rentalRate"],["mat-header-cell","","mat-sort-header","length"],["mat-header-cell","","mat-sort-header","rentalDuration"],["mat-header-cell","","mat-sort-header","releaseYear"],["mat-header-cell","","mat-sort-header","rating"],["mat-header-cell","","mat-sort-header","replacementCost"],["mat-header-cell","","mat-sort-header","language"],["mat-header-cell","","aria-label","row actions"],["mat-cell","",3,"routerLink"],["mat-header-row",""],["mat-row",""]],template:function(e,a){1&e&&(t.TgZ(0,"div",0)(1,"button",1),t._uU(2," Add Film "),t.qZA(),t.TgZ(3,"div",2)(4,"table",3),t.NdJ("matSortChange",function(r){return a.sortFilms(r)}),t.ynx(5,4),t.YNc(6,H,2,0,"th",5),t.YNc(7,B,2,1,"td",6),t.BQk(),t.ynx(8,7),t.YNc(9,E,2,0,"th",8),t.YNc(10,V,2,1,"td",6),t.BQk(),t.ynx(11,9),t.YNc(12,G,2,0,"th",10),t.YNc(13,W,2,1,"td",6),t.BQk(),t.ynx(14,11),t.YNc(15,j,2,0,"th",12),t.YNc(16,K,2,1,"td",6),t.BQk(),t.ynx(17,13),t.YNc(18,X,2,0,"th",14),t.YNc(19,tt,2,1,"td",6),t.BQk(),t.ynx(20,15),t.YNc(21,et,2,0,"th",16),t.YNc(22,it,2,1,"td",6),t.BQk(),t.ynx(23,17),t.YNc(24,at,2,0,"th",18),t.YNc(25,nt,2,1,"td",6),t.BQk(),t.ynx(26,19),t.YNc(27,ot,2,0,"th",20),t.YNc(28,lt,2,1,"td",6),t.BQk(),t.ynx(29,21),t.YNc(30,rt,2,0,"th",22),t.YNc(31,st,2,1,"td",6),t.BQk(),t.ynx(32,23),t.YNc(33,mt,2,0,"th",24),t.YNc(34,ut,3,3,"td",25),t.BQk(),t.YNc(35,pt,1,0,"tr",26),t.YNc(36,dt,1,0,"tr",27),t.qZA()(),t.TgZ(37,"mat-paginator",28),t.NdJ("page",function(r){return a.handlePageEvent(r)}),t.qZA()()),2&e&&(t.xp6(4),t.Q6J("dataSource",a.filmDataSource),t.xp6(31),t.Q6J("matHeaderRowDef",a.displayedColumns)("matHeaderRowDefSticky",!0),t.xp6(1),t.Q6J("matRowDefColumns",a.displayedColumns),t.xp6(1),t.Q6J("pageSizeOptions",a.pageSizeOptions)("pageSize",a.currentPageDetails.pageSize)("pageIndex",a.currentPageDetails.pageIndex)("length",a.currentPageDetails.length))},directives:[y.lW,g.rH,u.BZ,T.YE,u.w1,u.fO,u.ge,T.nU,u.Dz,u.ev,D.Hw,u.as,u.XQ,u.nj,u.Gk,N.NW],styles:[".frs-mb-10[_ngcontent-%COMP%]{margin-bottom:10px}.frs-mr-15[_ngcontent-%COMP%]{margin-right:15px}"]}),i})();var s=l(4006),F=l(8306),A=l(8372),f=l(4004),ht=l(9300),ft=l(3900),L=l(9521),Ct=l(1547),h=l(5938);let _t=(()=>{class i{constructor(e,a){this.dialogRef=e,this.data=a}onYesClick(){this.dialogRef.close(!0)}onNoClick(){this.dialogRef.close(!1)}ngOnInit(){}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(h.so),t.Y36(h.WI))},i.\u0275cmp=t.Xpm({type:i,selectors:[["frs-confirm-dialog"]],decls:10,vars:1,consts:[["mat-dialog-title",""],["mat-dialog-content",""],["mat-dialog-actions",""],["mat-button","",3,"click"],["mat-button","","cdkFocusInitial","",3,"click"]],template:function(e,a){1&e&&(t.TgZ(0,"h1",0),t._uU(1),t.qZA(),t.TgZ(2,"div",1)(3,"p"),t._uU(4,"What's your favorite animal?"),t.qZA()(),t.TgZ(5,"div",2)(6,"button",3),t.NdJ("click",function(){return a.onNoClick()}),t._uU(7,"No Thanks"),t.qZA(),t.TgZ(8,"button",4),t.NdJ("click",function(){return a.onYesClick()}),t._uU(9,"Yes"),t.qZA()()),2&e&&(t.xp6(1),t.hij("Hi ",a.data,""))},directives:[h.uh,h.xY,h.H8,y.lW],styles:[""]}),i})();var Ft=l(7009),w=l(3546),J=l(782),x=l(9549),At=l(4144),Zt=l(4385),vt=l(3238),Y=l(7957),Z=l(7331);const Tt=["actorInput"],yt=["categoryInput"];function xt(i,n){if(1&i&&(t.TgZ(0,"mat-option",40),t._uU(1),t.qZA()),2&i){const e=n.$implicit;t.Q6J("value",e),t.xp6(1),t.hij(" ",e," ")}}function bt(i,n){if(1&i&&(t.TgZ(0,"mat-option",40),t._uU(1),t.qZA()),2&i){const e=n.$implicit;t.Q6J("value",e),t.xp6(1),t.hij(" ",e.name," ")}}function It(i,n){if(1&i&&(t.TgZ(0,"mat-option",40),t._uU(1),t.qZA()),2&i){const e=n.$implicit;t.Q6J("value",e),t.xp6(1),t.hij(" ",e.name," ")}}function Nt(i,n){if(1&i&&(t.TgZ(0,"mat-option",40),t._uU(1),t.qZA()),2&i){const e=n.$implicit;t.Q6J("value",e),t.xp6(1),t.hij(" ",e," ")}}function Ut(i,n){if(1&i){const e=t.EpF();t.TgZ(0,"mat-chip",41),t.NdJ("removed",function(){const r=t.CHM(e).$implicit;return t.oxw().removeActor(r)}),t._uU(1),t.TgZ(2,"button",42)(3,"mat-icon"),t._uU(4,"cancel"),t.qZA()()()}if(2&i){const e=n.$implicit,a=t.oxw();t.Q6J("disabled",a.actorsControl.disabled),t.xp6(1),t.AsE(" ",e.firstName," ",e.lastName," ")}}function St(i,n){if(1&i&&(t.TgZ(0,"mat-option",40),t._uU(1),t.qZA()),2&i){const e=n.$implicit;t.Q6J("value",e),t.xp6(1),t.AsE(" ",e.firstName," ",e.lastName," ")}}function Dt(i,n){if(1&i){const e=t.EpF();t.TgZ(0,"mat-chip",41),t.NdJ("removed",function(){const r=t.CHM(e).$implicit;return t.oxw().removeCategory(r)}),t._uU(1),t.TgZ(2,"button",42)(3,"mat-icon"),t._uU(4,"cancel"),t.qZA()()()}if(2&i){const e=n.$implicit,a=t.oxw();t.Q6J("disabled",a.categoriesControl.disabled),t.xp6(1),t.hij(" ",e.name," ")}}function Lt(i,n){if(1&i&&(t.TgZ(0,"mat-option",40),t._uU(1),t.qZA()),2&i){const e=n.$implicit;t.Q6J("value",e),t.xp6(1),t.hij(" ",e.name," ")}}function wt(i,n){if(1&i){const e=t.EpF();t.TgZ(0,"button",43),t.NdJ("click",function(){return t.CHM(e),t.oxw().saveFilm()}),t._uU(1," Submit "),t.qZA()}if(2&i){const e=t.oxw();t.Q6J("disabled",e.filmForm.invalid||!e.filmForm.dirty)}}function Jt(i,n){if(1&i){const e=t.EpF();t.TgZ(0,"button",44),t.NdJ("click",function(){return t.CHM(e),t.oxw().clearForm()}),t._uU(1," Clear "),t.qZA()}}function Yt(i,n){if(1&i){const e=t.EpF();t.TgZ(0,"button",45),t.NdJ("click",function(){return t.CHM(e),t.oxw().resetToOldValues()}),t._uU(1," Reset to Old "),t.qZA()}}function Qt(i,n){if(1&i){const e=t.EpF();t.TgZ(0,"button",46),t.NdJ("click",function(){return t.CHM(e),t.oxw().editForm()}),t._uU(1," Edit "),t.qZA()}}function qt(i,n){if(1&i){const e=t.EpF();t.TgZ(0,"button",46),t.NdJ("click",function(){return t.CHM(e),t.oxw().createNew()}),t._uU(1," Create New "),t.qZA()}}let b=(()=>{class i{constructor(e,a,o,r,m,p){this.fb=e,this.filmService=a,this.route=o,this.snackBar=r,this.router=m,this.dialog=p,this.filmId=null,this.controlsConfig={},this.languageOptions$=new F.y,this.allLanguageOptions=[],this.originalLanguageOptions$=new F.y,this.ratingOptions=["G","PG","R","PG13","NC17"],this.yearOptions=Array.from({length:130},(Ht,Mt)=>Mt+1900),this.categoriesOptions$=new F.y,this.actorOptions$=new F.y,this.allCategoryOptions=[],this.selectedCategories=[],this.selectedActors=[],this.separatorKeysCodes=[L.K5,L.OC],this.isViewForm=!1,this.isEditForm=!1,this.editingFilm=null;const d=this.route.snapshot.paramMap.get("id"),v=this.route.snapshot.url[0].path,c="view"===v;this.isEditForm="edit"===v,this.isViewForm=c,this.categoriesControl=new s.NI({value:[],disabled:c}),this.actorsControl=new s.NI({value:[],disabled:c}),this.languageControl=new s.NI({value:"",disabled:c},s.kI.required),this.originalLanguageControl=new s.NI({value:"",disabled:c},s.kI.required);const q={title:[{value:"",disabled:c},[s.kI.required,Ct.Q.emptyStringCheck,s.kI.minLength(2),s.kI.maxLength(100)]],description:[{value:"",disabled:c}],releaseYear:[{value:2022,disabled:c},s.kI.required],language:this.languageControl,originalLanguage:this.originalLanguageControl,rentalDuration:[{value:0,disabled:c},s.kI.required],rentalRate:[{value:0,disabled:c},[s.kI.required,s.kI.min(.1)]],length:[{value:0,disabled:c},[s.kI.required,s.kI.min(1)]],replacementCost:[{value:0,disabled:c},[s.kI.required,s.kI.min(.1)]],rating:[{value:"PG13",disabled:c}],specialFeatures:[{value:"",disabled:c}],actors:this.actorsControl,categories:this.categoriesControl};this.filmForm=this.fb.group(q),this.controlsConfig=q,d&&(this.filmId=+d,this.fetchFilm(+d,null))}fetchFilm(e,a){e&&this.filmService.getFilmById(+e).subscribe({next:o=>{const r={languageId:o.languageId,name:o.language},p=o;p.originalLanguage={languageId:o.originalLanguageId,name:o.originalLanguage},p.language=r,this.patchFilmValuesToForm({...p}),a?this.router.navigate([a]):this.editingFilm=p}})}saveFilm(){if(this.filmForm.valid){const e=this.filmForm.value,a=e.language,o=e.originalLanguage;e.originalLanguage=o.name,e.originalLanguageId=o.languageId,e.language=a.name,e.languageId=a.languageId,e.actors=this.selectedActors,e.categories=this.selectedCategories,e.id=this.filmId,e.title=e.title.trim(),this.filmId?this.filmService.patchFilm(this.filmId,e).subscribe({next:r=>{this.navigateToView(),this.snackBar.open("Film updated.","Close")},error:r=>{this.snackBar.open("Film updation failed.","Close")}}):this.filmService.addFilm(e).subscribe({next:r=>{this.filmId=r.id,this.navigateToView(),this.snackBar.open("Film created.","Close")},error:r=>{this.snackBar.open("Film creation failed.","Close")}})}}clearForm(){this.selectedActors=[],this.selectedCategories=[],this.filmForm.reset({title:"",description:"",releaseYear:2022,length:0,rentalDuration:0,rentalRate:0,replacementCost:0,rating:"PG13",specialFeatures:""})}patchFilmValuesToForm(e){this.filmForm.patchValue(e),this.selectedActors=[...e.actors],this.selectedCategories=[...e.categories]}resetToOldValues(){this.patchFilmValuesToForm(this.editingFilm)}navigateToView(){this.fetchFilm(this.filmId,"/films/view/"+this.filmId)}ngOnInit(){this.filmService.getAllLanguages().subscribe({next:e=>{this.allLanguageOptions=e}}),this.filmService.getAllCategories().subscribe({next:e=>{this.allCategoryOptions=e}}),this.languageOptions$=this.languageControl.valueChanges.pipe((0,A.b)(100),(0,f.U)(this.languageMapper.bind(this))),this.originalLanguageOptions$=this.originalLanguageControl.valueChanges.pipe((0,A.b)(100),(0,f.U)(this.languageMapper.bind(this))),this.actorOptions$=this.actorsControl.valueChanges.pipe((0,A.b)(300),(0,ht.h)(e=>e&&e.length>2&&"string"==typeof e),(0,f.U)(e=>e.toLowerCase()),(0,ft.w)(e=>this.filmService.getActorsByName(e)),(0,f.U)(e=>e.length?e:[{id:1,firstName:"Not found, Please",lastName:"Add actor using the actors/add Page"}])),this.categoriesOptions$=this.categoriesControl.valueChanges.pipe((0,A.b)(100),(0,f.U)(e=>e?"string"==typeof e?this.allCategoryOptions.filter(a=>a.name.toLowerCase().includes(e.toLowerCase())):[]:this.allCategoryOptions))}languageMapper(e){return e&&"string"==typeof e?this.allLanguageOptions.filter(a=>a.name.toLowerCase().includes(e.toLowerCase())):this.allLanguageOptions}displayFn(e){return e&&e.name?e.name:""}displayActorFn(e){return e?`${e.firstName} ${e.lastName}`:""}controlFocused(e){e&&""===e.value&&e.setValue("")}categoryFocused(e){""===e.target.value&&this.categoriesControl.setValue("")}removeActor(e){this.selectedActors=this.selectedActors.filter(a=>a.id!==e.id)}removeCategory(e){this.selectedCategories=this.selectedCategories.filter(a=>a.id!==e.id)}actorSelected(e){this.selectedActors.push(e.option.value),this.actorInput&&(this.actorInput.nativeElement.value=""),this.actorsControl.setValue(null)}categorySelected(e){this.selectedCategories.push(e.option.value),this.categoryInput&&(this.categoryInput.nativeElement.value=""),this.categoriesControl.setValue(null)}editForm(){this.router.navigate(["films/edit",this.filmId])}createNew(){this.router.navigate(["films/add"])}openConfirmDialog(){return this.dialogRef=this.dialog.open(_t,{width:"350px",data:"Are you sure, Do you want to discard changes?"}),this.dialogRef.afterClosed()}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(s.qu),t.Y36(S),t.Y36(g.gz),t.Y36(Ft.ux),t.Y36(g.F0),t.Y36(h.uw))},i.\u0275cmp=t.Xpm({type:i,selectors:[["frs-add-film"]],viewQuery:function(e,a){if(1&e&&(t.Gf(Tt,5),t.Gf(yt,5)),2&e){let o;t.iGM(o=t.CRH())&&(a.actorInput=o.first),t.iGM(o=t.CRH())&&(a.categoryInput=o.first)}},decls:103,vars:58,consts:[[1,"container"],[1,"text-xl","font-bold","mb-4"],[3,"formGroup"],["filmDetailForm",""],["cols","6","rowHeight","80","gutterSize","10px"],[3,"colspan","rowspan"],[1,"frs-w-full"],["matInput","","formControlName","title"],["matInput","","formControlName","description","rows","7"],["formControlName","releaseYear"],[3,"value",4,"ngFor","ngForOf"],["matInput","","formControlName","language",3,"matAutocomplete","focus"],[3,"displayWith"],["langAuto","matAutocomplete"],["matInput","","formControlName","originalLanguage",3,"matAutocomplete","focus"],["originalLangAuto","matAutocomplete"],["matInput","","type","number","formControlName","rentalDuration"],["matInput","","type","number","formControlName","rentalRate","step","0.01"],["matInput","","type","number","formControlName","length"],["matInput","","type","number","formControlName","replacementCost","step","0.01"],["formControlName","rating"],["matInput","","formControlName","specialFeatures","rows","1"],["aria-label","Actor selection"],["chipList",""],[3,"disabled","removed",4,"ngFor","ngForOf"],["matInput","","placeholder","Search Actor","formControlName","actors",3,"disabled","matAutocomplete","matChipInputFor","matChipInputSeparatorKeyCodes"],["actorInput",""],["disabled","isViewForm",3,"displayWith","optionSelected"],["actorAuto","matAutocomplete"],["aria-label","Category selection"],["categoryChipList",""],["matInput","","placeholder","Search Category","formControlName","categories",3,"disabled","matAutocomplete","matChipInputFor","matChipInputSeparatorKeyCodes","focus"],["categoryInput",""],[3,"displayWith","optionSelected"],["categoryAutoComplete","matAutocomplete"],[2,"display","flex","justify-content","space-around"],["mat-raised-button","","color","primary",3,"disabled","click",4,"ngIf"],["mat-raised-button","","color","warn",3,"click",4,"ngIf"],["mat-raised-button","","color","accent",3,"click",4,"ngIf"],["mat-raised-button","",3,"click",4,"ngIf"],[3,"value"],[3,"disabled","removed"],["matChipRemove",""],["mat-raised-button","","color","primary",3,"disabled","click"],["mat-raised-button","","color","warn",3,"click"],["mat-raised-button","","color","accent",3,"click"],["mat-raised-button","",3,"click"]],template:function(e,a){if(1&e&&(t.TgZ(0,"div",0)(1,"mat-card")(2,"mat-card-content")(3,"h2",1),t._uU(4,"Film Details:"),t.qZA(),t.TgZ(5,"form",2,3)(7,"mat-grid-list",4)(8,"mat-grid-tile",5)(9,"mat-form-field",6)(10,"mat-label"),t._uU(11,"Title"),t.qZA(),t._UZ(12,"input",7),t.qZA()(),t.TgZ(13,"mat-grid-tile",5)(14,"mat-form-field",6)(15,"mat-label"),t._uU(16,"Description"),t.qZA(),t._UZ(17,"textarea",8),t.qZA()(),t.TgZ(18,"mat-grid-tile",5)(19,"mat-form-field",6)(20,"mat-label"),t._uU(21,"Release Year"),t.qZA(),t.TgZ(22,"mat-select",9),t.YNc(23,xt,2,2,"mat-option",10),t.qZA()()(),t.TgZ(24,"mat-grid-tile",5)(25,"mat-form-field",6)(26,"mat-label"),t._uU(27,"Language"),t.qZA(),t.TgZ(28,"input",11),t.NdJ("focus",function(){return a.controlFocused(a.filmForm.get("language"))}),t.qZA(),t.TgZ(29,"mat-autocomplete",12,13),t.YNc(31,bt,2,2,"mat-option",10),t.ALo(32,"async"),t.qZA()()(),t.TgZ(33,"mat-grid-tile",5)(34,"mat-form-field",6)(35,"mat-label"),t._uU(36,"Original Language"),t.qZA(),t.TgZ(37,"input",14),t.NdJ("focus",function(){return a.controlFocused(a.filmForm.get("originalLanguage"))}),t.qZA(),t.TgZ(38,"mat-autocomplete",12,15),t.YNc(40,It,2,2,"mat-option",10),t.ALo(41,"async"),t.qZA()()(),t.TgZ(42,"mat-grid-tile",5)(43,"mat-form-field",6)(44,"mat-label"),t._uU(45,"Rental Duration"),t.qZA(),t._UZ(46,"input",16),t.qZA()(),t.TgZ(47,"mat-grid-tile",5)(48,"mat-form-field",6)(49,"mat-label"),t._uU(50,"Rental Rate"),t.qZA(),t._UZ(51,"input",17),t.qZA()(),t.TgZ(52,"mat-grid-tile",5)(53,"mat-form-field",6)(54,"mat-label"),t._uU(55,"Length"),t.qZA(),t._UZ(56,"input",18),t.qZA()(),t.TgZ(57,"mat-grid-tile",5)(58,"mat-form-field",6)(59,"mat-label"),t._uU(60,"Replacement Cost"),t.qZA(),t._UZ(61,"input",19),t.qZA()(),t.TgZ(62,"mat-grid-tile",5)(63,"mat-form-field",6)(64,"mat-label"),t._uU(65,"Rating"),t.qZA(),t.TgZ(66,"mat-select",20),t.YNc(67,Nt,2,2,"mat-option",10),t.qZA()()(),t.TgZ(68,"mat-grid-tile",5)(69,"mat-form-field",6)(70,"mat-label"),t._uU(71,"Special Features"),t.qZA(),t._UZ(72,"textarea",21),t.qZA()()(),t.TgZ(73,"mat-form-field",6)(74,"mat-label"),t._uU(75,"Actors"),t.qZA(),t.TgZ(76,"mat-chip-list",22,23),t.YNc(78,Ut,5,3,"mat-chip",24),t._UZ(79,"input",25,26),t.qZA(),t.TgZ(81,"mat-autocomplete",27,28),t.NdJ("optionSelected",function(r){return a.actorSelected(r)}),t.YNc(83,St,2,3,"mat-option",10),t.ALo(84,"async"),t.qZA()(),t.TgZ(85,"mat-form-field",6)(86,"mat-label"),t._uU(87,"Categories"),t.qZA(),t.TgZ(88,"mat-chip-list",29,30),t.YNc(90,Dt,5,2,"mat-chip",24),t.TgZ(91,"input",31,32),t.NdJ("focus",function(r){return a.categoryFocused(r)}),t.qZA()(),t.TgZ(93,"mat-autocomplete",33,34),t.NdJ("optionSelected",function(r){return a.categorySelected(r)}),t.YNc(95,Lt,2,2,"mat-option",10),t.ALo(96,"async"),t.qZA()(),t.TgZ(97,"div",35),t.YNc(98,wt,2,1,"button",36),t.YNc(99,Jt,2,0,"button",37),t.YNc(100,Yt,2,0,"button",38),t.YNc(101,Qt,2,0,"button",39),t.YNc(102,qt,2,0,"button",39),t.qZA()()()()()),2&e){const o=t.MAs(30),r=t.MAs(39),m=t.MAs(77),p=t.MAs(82),d=t.MAs(89),v=t.MAs(94);t.xp6(5),t.Q6J("formGroup",a.filmForm),t.xp6(3),t.Q6J("colspan",3)("rowspan",1),t.xp6(5),t.Q6J("colspan",3)("rowspan",2),t.xp6(5),t.Q6J("colspan",3)("rowspan",1),t.xp6(5),t.Q6J("ngForOf",a.yearOptions),t.xp6(1),t.Q6J("colspan",2)("rowspan",1),t.xp6(4),t.Q6J("matAutocomplete",o),t.xp6(1),t.Q6J("displayWith",a.displayFn),t.xp6(2),t.Q6J("ngForOf",t.lcZ(32,50,a.languageOptions$)),t.xp6(2),t.Q6J("colspan",2)("rowspan",1),t.xp6(4),t.Q6J("matAutocomplete",r),t.xp6(1),t.Q6J("displayWith",a.displayFn),t.xp6(2),t.Q6J("ngForOf",t.lcZ(41,52,a.originalLanguageOptions$)),t.xp6(2),t.Q6J("colspan",2)("rowspan",1),t.xp6(5),t.Q6J("colspan",2)("rowspan",1),t.xp6(5),t.Q6J("colspan",2)("rowspan",1),t.xp6(5),t.Q6J("colspan",2)("rowspan",1),t.xp6(5),t.Q6J("colspan",2)("rowspan",1),t.xp6(5),t.Q6J("ngForOf",a.ratingOptions),t.xp6(1),t.Q6J("colspan",4)("rowspan",1),t.xp6(10),t.Q6J("ngForOf",a.selectedActors),t.xp6(1),t.Q6J("disabled",a.actorsControl.disabled)("matAutocomplete",p)("matChipInputFor",m)("matChipInputSeparatorKeyCodes",a.separatorKeysCodes),t.xp6(2),t.Q6J("displayWith",a.displayActorFn),t.xp6(2),t.Q6J("ngForOf",t.lcZ(84,54,a.actorOptions$)),t.xp6(7),t.Q6J("ngForOf",a.selectedCategories),t.xp6(1),t.Q6J("disabled",a.categoriesControl.disabled)("matAutocomplete",v)("matChipInputFor",d)("matChipInputSeparatorKeyCodes",a.separatorKeysCodes),t.xp6(2),t.Q6J("displayWith",a.displayFn),t.xp6(2),t.Q6J("ngForOf",t.lcZ(96,56,a.categoriesOptions$)),t.xp6(3),t.Q6J("ngIf",!a.isViewForm),t.xp6(1),t.Q6J("ngIf",!a.isViewForm),t.xp6(1),t.Q6J("ngIf",a.isEditForm),t.xp6(1),t.Q6J("ngIf",a.isViewForm),t.xp6(1),t.Q6J("ngIf",a.isViewForm||a.isEditForm)}},directives:[w.a8,w.dn,s._Y,s.JL,s.sg,J.Il,J.DX,x.KE,x.hX,At.Nt,s.Fj,s.JJ,s.u,Zt.gD,C.sg,vt.ey,Y.ZL,Y.XC,s.wV,Z.qn,Z.HS,Z.qH,D.Hw,Z.oH,C.O5,y.lW],pipes:[C.Ov],styles:[".container[_ngcontent-%COMP%]{max-width:900px;margin:0 auto}.frs-w-full[_ngcontent-%COMP%]{width:100%}"]}),i})(),Q=(()=>{class i{canDeactivate(e,a,o,r){return!(!e.isViewForm&&e.filmForm.dirty)||e.openConfirmDialog()}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const Ot=[{path:"",component:gt},{path:"add",component:b,canDeactivate:[Q]},{path:"edit/:id",component:b,canDeactivate:[Q]},{path:"view/:id",component:b}];let $t=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[[g.Bz.forChild(Ot)],g.Bz]}),i})();var Rt=l(3686),Pt=l(4466);let kt=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({providers:[{provide:x.o2,useValue:{appearance:"outline"}}],imports:[[C.ez,$t,s.UX,s.u5,g.Bz,Rt.q,U.JF,Pt.m]]}),i})()}}]);